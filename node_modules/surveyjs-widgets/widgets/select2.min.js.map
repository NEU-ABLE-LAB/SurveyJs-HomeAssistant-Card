{"version":3,"file":"widgets/select2.min.js","mappings":"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","sources":["webpack://surveyjs-widgets/webpack/universalModuleDefinition","webpack://surveyjs-widgets/webpack/bootstrap","webpack://surveyjs-widgets/webpack/runtime/define property getters","webpack://surveyjs-widgets/webpack/runtime/hasOwnProperty shorthand","webpack://surveyjs-widgets/webpack/runtime/make namespace object","webpack://surveyjs-widgets/./src/select2.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widgets/select2\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widgets/select2\"] = factory();\n\telse\n\t\troot[\"widgets/select2\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","function init(Survey, $) {\n  $ = $ || window.$;\n  const componentName = \"select2\";\n  var widget = {\n    activatedBy: \"property\",\n    name: componentName,\n    widgetIsLoaded: function () {\n      return typeof $ == \"function\" && !!$.fn.select2;\n    },\n    isFit: function (question) {\n      if (widget.activatedBy == \"property\")\n        return (\n          question[\"renderAs\"] === componentName &&\n          question.getType() === \"dropdown\"\n        );\n      if (widget.activatedBy == \"type\")\n        return question.getType() === \"dropdown\";\n      if (widget.activatedBy == \"customtype\")\n        return question.getType() === componentName;\n      return false;\n    },\n    activatedByChanged: function (activatedBy) {\n      if (!this.widgetIsLoaded()) return;\n      widget.activatedBy = activatedBy;\n      Survey.Serializer.removeProperty(\"dropdown\", \"renderAs\");\n      if (activatedBy == \"property\") {\n        Survey.Serializer.addProperty(\"dropdown\", {\n          name: \"renderAs\",\n          category: \"general\",\n          default: \"default\",\n          choices: [componentName, \"default\"],\n        });\n        Survey.Serializer.addProperty(\"dropdown\", {\n          dependsOn: \"renderAs\",\n          category: \"general\",\n          name: \"select2Config\",\n          visibleIf: function (obj) {\n            return obj.renderAs == componentName;\n          },\n        });\n      }\n      if (activatedBy == \"customtype\") {\n        if(Survey.Serializer.findClass(componentName)) return;\n        Survey.Serializer.addClass(componentName, [], null, \"dropdown\");\n        let registerQuestion = Survey.ElementFactory.Instance.registerCustomQuestion;\n        if(!!registerQuestion) registerQuestion(componentName);\n          Survey.Serializer.addProperty(componentName, {\n          name: \"select2Config\",\n          category: \"general\",\n          default: null,\n        });\n      }\n    },\n    htmlTemplate:\n      \"<div><select style='width: 100%;'></select><textarea></textarea></div>\",\n    afterRender: function (question, el) {\n      var select2Config = question.select2Config;\n      var settings =\n        select2Config && typeof select2Config == \"string\"\n          ? JSON.parse(select2Config)\n          : select2Config;\n      if (!settings) settings = {};\n      var $el = $(el).is(\"select\") ? $(el) : $(el).find(\"select\");\n      var $otherElement = $(el).find(\"textarea\");\n      $otherElement.addClass(question.cssClasses.other);\n      $otherElement.bind(\"input propertychange\", function () {\n        if (isSettingValue) return;\n        question.comment = $otherElement.val();\n      });\n\n      var updateComment = function () {\n        $otherElement.val(question.comment);\n        if (question.isOtherSelected) {\n          $otherElement.show();\n        } else {\n          $otherElement.hide();\n        }\n      };\n      var isSettingValue = false;\n      var updateValueHandler = function () {\n        if (isSettingValue) return;\n        isSettingValue = true;\n        if ($el.find('option[value=\"' + (question.value || \"\") + '\"]').length) {\n          $el.val(question.value).trigger(\"change\");\n        } else {\n          if (\n            question.value !== null &&\n            question.value !== undefined &&\n            !question.isOtherSelected\n          ) {\n            var newOption = new Option(\n              question.value, //TODO if question value is object then need to improve\n              question.value,\n              true,\n              true\n            );\n            $el.append(newOption).trigger(\"change\");\n          }\n        }\n        updateComment();\n        isSettingValue = false;\n      };\n      var updateChoices = function () {\n        $el.select2().empty();\n        if (!settings.placeholder && question.showOptionsCaption) {\n          settings.placeholder = question.optionsCaption;\n          settings.allowClear = true;\n        }\n        if (!settings.theme) {\n          settings.theme = \"classic\";\n        }\n        settings.disabled = question.isReadOnly;\n        if (settings.ajax) {\n          $el.select2(settings);\n          question.keepIncorrectValues = true;\n        } else {\n          var data = [];\n          if (!!settings.placeholder || question.showOptionsCaption) {\n            data.push({ id: \"\", text: \"\" });\n          }\n          settings.data = data.concat(\n            question.visibleChoices.map(function (choice) {\n              return {\n                id: choice.value,\n                text: choice.text,\n              };\n            })\n          );\n          question.clearIncorrectValues();\n          $el.select2(settings);\n        }\n        // fixed width accrording to https://stackoverflow.com/questions/45276778/select2-not-responsive-width-larger-than-container\n        if (!!el.querySelector(\".select2\")) {\n          el.querySelector(\".select2\").style.width = \"100%\";\n        }\n        if (!!el.nextElementSibling) {\n          el.nextElementSibling.style.marginBottom = \"1px\";\n        }\n        updateValueHandler();\n      };\n\n      $otherElement.prop(\"disabled\", question.isReadOnly);\n      question.readOnlyChangedCallback = function () {\n        $el.prop(\"disabled\", question.isReadOnly);\n        $otherElement.prop(\"disabled\", question.isReadOnly);\n      };\n\n      question.registerFunctionOnPropertyValueChanged(\n        \"visibleChoices\",\n        function () {\n          updateChoices();\n        }\n      );\n      updateChoices();\n      $el.on(\"change\", function (e) {\n        setTimeout(function () {\n          question.renderedValue = e.target.value;\n          updateComment();\n        }, 1);\n      });\n      $el.on(\"select2:select\", function (e) {\n        setTimeout(function () {\n          question.renderedValue = e.target.value;\n          updateComment();\n        }, 1);\n      });\n      $el.on(\"select2:opening\", function (e) {\n        if ($(this).data(\"unselecting\")) {\n          $(this).removeData(\"unselecting\");\n          e.preventDefault();\n        }\n      });\n      $el.on(\"select2:unselecting\", function (e) {\n        $(this).data(\"unselecting\", true);\n        setTimeout(function () {\n          question.renderedValue = null;\n          updateComment();\n        }, 1);\n      });\n      question.valueChangedCallback = updateValueHandler;\n      updateValueHandler();\n    },\n    willUnmount: function (question, el) {\n      question.readOnlyChangedCallback = null;\n      question.valueChangedCallback = null;\n      var $select2 = $(el).find(\"select\");\n      if (!!$select2.data(componentName)) {\n        $select2\n          .off(\"select2:select\")\n          .off(\"select2:unselecting\")\n          .off(\"select2:opening\")\n          .select2(\"destroy\");\n      }\n    },\n  };\n\n  Survey.CustomWidgetCollection.Instance.addCustomWidget(widget);\n}\n\nif (typeof Survey !== \"undefined\") {\n  init(Survey, window.jQuery);\n}\n\nexport default init;\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","init","Survey","$","window","componentName","widget","activatedBy","name","widgetIsLoaded","fn","select2","isFit","question","getType","activatedByChanged","this","Serializer","removeProperty","addProperty","category","default","choices","dependsOn","visibleIf","renderAs","findClass","addClass","registerQuestion","ElementFactory","Instance","registerCustomQuestion","htmlTemplate","afterRender","el","select2Config","settings","JSON","parse","$el","is","find","$otherElement","cssClasses","other","bind","isSettingValue","comment","val","updateComment","isOtherSelected","show","hide","updateValueHandler","length","trigger","undefined","newOption","Option","append","updateChoices","empty","placeholder","showOptionsCaption","optionsCaption","allowClear","theme","disabled","isReadOnly","ajax","keepIncorrectValues","data","push","id","text","concat","visibleChoices","map","choice","clearIncorrectValues","querySelector","style","width","nextElementSibling","marginBottom","readOnlyChangedCallback","registerFunctionOnPropertyValueChanged","on","e","setTimeout","renderedValue","target","removeData","preventDefault","valueChangedCallback","willUnmount","$select2","off","CustomWidgetCollection","addCustomWidget","jQuery"],"sourceRoot":""}